{"version":3,"sources":["panels/components/loader.js","panels/components/horoscope.js","panels/components/user.js","panels/Home.js","App.js","index.js"],"names":["Loader","className","images","label","img","Horoscope","zodiac","user","useState","hososcopeArr","setHoroscopeArr","useEffect","fetch","then","res","json","stretched","icon","height","width","src","find","item","name","header","source","action","style","display","onClick","link","bridge","send","attachments","message","sign_teaser","sign","text","owner_id","id","copyright","before","mode","marginRight","background_type","url","locked","attachment","type","stickers","sticker_type","sticker","transform","relation_width","translation_y","can_delete","content_type","clickable_zones","action_type","tooltip_text_key","clickable_area","x","y","User","disabled","size","photo_200","caption","bdate","bottom","title","first_name","last_name","Home","fetchedUser","setZodiac","zodiacArr","date","split","m","d","console","log","App","activePanel","setActivePanel","setUser","popout","setPopout","a","subscribe","detail","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","go","e","currentTarget","dataset","to","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.aa0952c5.chunk.js","sourcesContent":["import React from \"react\";\nimport './loader.css'\nconst Loader = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"item item-1\">\n\n      </div>\n      <div className=\"item item-2\">\n\n      </div>\n      <div className=\"item item-3\">\n\n      </div>\n      <div className=\"item item-4\">\n\n      </div>\n    </div>\n  );\n};\n\nexport default Loader;\n","import React, { useState, useEffect } from 'react';\r\nimport {Button, Placeholder} from \"@vkontakte/vkui\";\r\nimport Icon24ShareOutline from \"@vkontakte/icons/dist/24/share_outline\";\r\nimport Icon24StoryOutline from \"@vkontakte/icons/dist/24/story_outline\";\r\nimport Loader from \"./loader\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nconst images = [\r\n    {label: 'aries', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172597.png'},\r\n    {label: 'taurus', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172432.png'},\r\n    {label: 'gemini', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172433.png'},\r\n    {label: 'cancer', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172427.png'},\r\n    {label: 'leo', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172428.png'},\r\n    {label: 'virgo', img: 'https://24tv.ua/resources/photos/news/720x540_DIR/202005/1351979_14172434.png'},\r\n    {label: 'libra', img: 'https://24tv.ua/resources/photos/news/720x522_DIR/202005/1351979_14172429.png'},\r\n    {label: 'scorpio', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172435.png'},\r\n    {label: 'sagittarius', img: 'https://24tv.ua/resources/photos/news/720x538_DIR/202005/1351979_14172437.png'},\r\n    {label: 'capricorn', img: 'https://24tv.ua/resources/photos/news/720x574_DIR/202005/1351979_14172436.png'},\r\n    {label: 'aquarius', img: 'https://24tv.ua/resources/photos/news/720x520_DIR/202005/1351979_14172430.png'},\r\n    {label: 'pisces', img: 'https://24tv.ua/resources/photos/news/720x538_DIR/202005/1351979_14172431.png'}\r\n];\r\n\r\n\r\nconst Horoscope = ({zodiac, user}) => {\r\n    const [hososcopeArr, setHoroscopeArr] = useState(null);\r\n    useEffect(()=>{\r\n        fetch('https://mysterious-garden-57052.herokuapp.com/horoscope/sex')\r\n            .then(res=>res.json())\r\n            .then(res=>{\r\n                setHoroscopeArr(res)\r\n            })\r\n    }, []);\r\n    const wallPost = () => {\r\n        const link = \"https://vk.com/app7617614\";\r\n        bridge.send(\"VKWebAppShowWallPostBox\", {\r\n            attachments: link,\r\n            message:\r\n                zodiac.label + \" - \" + hososcopeArr.source + \"\\n\" +\r\n                hososcopeArr.sign_teaser.find(item=>item.sign === zodiac.name).text +\r\n                \"\\n\",\r\n            owner_id: user.id,\r\n            copyright: link,\r\n        });\r\n    };\r\n\r\n    const storiesPost = () => {\r\n        const link = \"https://vk.com/app7617614\";\r\n        bridge.send(\"VKWebAppShowStoryBox\", {\r\n            background_type: \"image\",\r\n            url:\r\n                \"https://i.pinimg.com/736x/3b/3a/11/3b3a11b5dd823830adf94eba98cd9060.jpg\",\r\n            locked: true,\r\n            attachment: {\r\n                text: \"view\",\r\n                type: \"url\",\r\n                url: link,\r\n            },\r\n            stickers: [\r\n                {\r\n                    sticker_type: \"renderable\",\r\n                    sticker: {\r\n                        transform: {\r\n                            relation_width: 0.9,\r\n                            translation_y: 0.25,\r\n                        },\r\n                        can_delete: 0,\r\n                        content_type: \"image\",\r\n                        url: images.find(item=>item.label === zodiac.name).img,\r\n                        clickable_zones: [\r\n                            {\r\n                                // \"action_type\": \"app\",\r\n                                action_type: \"link\",\r\n                                action: {\r\n                                    link:link,\r\n                                    tooltip_text_key: \"tooltip_open_page\",\r\n                                },\r\n                                clickable_area: [\r\n                                    {\r\n                                        x: 0,\r\n                                        y: 0,\r\n                                    },\r\n                                    {\r\n                                        x: 884,\r\n                                        y: 0,\r\n                                    },\r\n                                    {\r\n                                        x: 884,\r\n                                        y: 196,\r\n                                    },\r\n                                    {\r\n                                        x: 0,\r\n                                        y: 196,\r\n                                    },\r\n                                ],\r\n                            },\r\n                        ],\r\n                    },\r\n                },\r\n            ],\r\n        });\r\n    };\r\n    return hososcopeArr !== null && zodiac !== null ?\r\n        <Placeholder\r\n            stretched\r\n            icon={<img height={100} width={130} src={images.find(item=>item.label === zodiac.name).img}/>}\r\n            header={zodiac.label + \" - \" + hososcopeArr.source}\r\n            action={\r\n                <div style={{display: 'flex'}}>\r\n                    <Button onClick={wallPost} before={<Icon24ShareOutline />} mode={'outline'} stretched style={{marginRight: 8}}>На стену</Button>\r\n                    <Button onClick={storiesPost} before={<Icon24StoryOutline />} mode={'outline'} stretched>В историю</Button>\r\n                </div>\r\n            }\r\n        >\r\n            {hososcopeArr.sign_teaser.find(item=>item.sign === zodiac.name).text}\r\n        </Placeholder> :\r\n        <Loader/>\r\n};\r\n\r\nexport default Horoscope;","import React from 'react';\r\nimport {RichCell, Avatar} from \"@vkontakte/vkui\";\r\n\r\nconst User = ({user, zodiac}) => {\r\n    return user !== null && zodiac !== null ?\r\n        <RichCell\r\n            disabled\r\n            before={<Avatar size={72} src={user.photo_200 || null} />}\r\n            caption={\"Дата рождения - \"+user.bdate}\r\n            bottom={zodiac.title}\r\n        >\r\n            {user.first_name + \" \" + user.last_name}\r\n        </RichCell> : null\r\n};\r\n\r\nexport default User;","import React, {useState, useEffect} from 'react';\r\nimport Horoscope from \"./components/horoscope\";\r\nimport User from \"./components/user\";\r\nimport {Panel, PanelHeader, Placeholder} from \"@vkontakte/vkui\";\r\nimport Loader from \"./components/loader\";\r\n\r\nconst Home = ({id, fetchedUser}) => {\r\n    const [zodiac, setZodiac] = useState(null);\r\n    let zodiacArr = [\r\n        [1, '', '', ''],\r\n        [19, 'Козерог (22.12–19.1)', 'Земля', 'Сатурн', 'capricorn', 'Козерог'],\r\n        [18, 'Водолей (20.1–18.2)', 'Воздух', 'Сатурн, Уран', 'aquarius', 'Водолей'],\r\n        [20, 'Рыбы (19.2–20.3)', 'Вода', 'Юпитер, Нептун', 'pisces', 'Рыбы'],\r\n        [19, 'Овен (21.3–19.4)', 'Огонь', 'Марс', 'aries', 'Овен'],\r\n        [20, 'Телец (20.4–20.5)', 'Земля', 'Венера', 'taurus', 'Телец'],\r\n        [21, 'Близнецы (21.5–21.6)', 'Воздух', 'Меркурий', 'gemini', 'Близнецы'],\r\n        [22, 'Рак (22.6–22.7)', 'Вода', 'Луна', 'cancer', 'Рак'],\r\n        [22, 'Лев (23.7–22.8)', 'Огонь', 'Солнце', 'leo', 'Лев'],\r\n        [22, 'Дева (23.8–22.9)', 'Земля', 'Меркурий', 'virgo', 'Дева'],\r\n        [22, 'Весы (23.9–22.10)', 'Воздух', 'Венера', 'libra', 'Весы'],\r\n        [22, 'Скорпион (23.10–22.11)', 'Вода', 'Марс, Плутон', 'scorpio', 'Скорпион'],\r\n        [21, 'Стрелец (23.11–21.12)', 'Огонь', 'Юпитер', 'sagittarius', 'Стрелец']\r\n    ];\r\n    useEffect(() => {\r\n        if (fetchedUser !== null) {\r\n            const date = fetchedUser.bdate.split('.')\r\n            let m = date[1];\r\n            let d = date[0];\r\n            if (d<1||d>31) {\r\n                m=0;\r\n                d=0;\r\n            }\r\n            if (m<1||m>12) {\r\n                m=0;\r\n                d=0;\r\n            }\r\n            if (d>zodiacArr[m][0]) m+=1;\r\n            if (m>12) m=1;\r\n            if (zodiacArr[m][1]!=='') {\r\n                setZodiac({title: zodiacArr[m][1]+', '+zodiacArr[m][2]+', '+zodiacArr[m][3], name: zodiacArr[m][4], label: zodiacArr[m][5]});\r\n            } else {\r\n                console.log('error')\r\n            }\r\n        }\r\n    }, [fetchedUser]);\r\n    return zodiac !== null ?\r\n        <Panel id={id}>\r\n            <PanelHeader>Гороскопус</PanelHeader>\r\n            <User user={fetchedUser} zodiac={zodiac}/>\r\n            <Horoscope zodiac={zodiac} user={fetchedUser}/>\r\n        </Panel> :\r\n        <Loader/>\r\n\r\n};\r\n\r\nexport default Home;","import React, { useState, useEffect } from 'react';\nimport bridge from \"@vkontakte/vk-bridge\";\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './style.css'\nimport Loader from \"./panels/components/loader\";\n\nimport Home from './panels/Home';\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<Loader/>);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} />\n\t\t</View>\n\t);\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}