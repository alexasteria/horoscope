{"version":3,"sources":["panels/components/horoscope.js","panels/components/user.js","panels/Home.js","App.js","index.js"],"names":["images","label","img","Horoscope","zodiac","useState","hososcopeArr","setHoroscopeArr","useEffect","fetch","then","res","json","stretched","icon","height","width","src","find","item","name","header","sign_teaser","sign_name","source","action","style","display","before","mode","marginRight","sign","text","User","user","disabled","size","photo_200","caption","bdate","bottom","title","first_name","last_name","Home","id","fetchedUser","setZodiac","zodiacArr","date","split","m","d","console","log","App","activePanel","setActivePanel","setUser","popout","setPopout","a","bridge","send","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","go","e","currentTarget","dataset","to","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e2e620b5.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {Button, Placeholder} from \"@vkontakte/vkui\";\r\nimport Icon24ShareOutline from \"@vkontakte/icons/dist/24/share_outline\";\r\nimport Icon24StoryOutline from \"@vkontakte/icons/dist/24/story_outline\";\r\nconst images = [\r\n    {label: 'aries', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172597.png'},\r\n    {label: 'taurus', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172432.png'},\r\n    {label: 'gemini', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172433.png'},\r\n    {label: 'cancer', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172427.png'},\r\n    {label: 'leo', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172428.png'},\r\n    {label: 'virgo', img: 'https://24tv.ua/resources/photos/news/720x540_DIR/202005/1351979_14172434.png'},\r\n    {label: 'libra', img: 'https://24tv.ua/resources/photos/news/720x522_DIR/202005/1351979_14172429.png'},\r\n    {label: 'scorpio', img: 'https://24tv.ua/resources/photos/news/720x553_DIR/202005/1351979_14172435.png'},\r\n    {label: 'sagittarius', img: 'https://24tv.ua/resources/photos/news/720x538_DIR/202005/1351979_14172437.png'},\r\n    {label: 'capricorn', img: 'https://24tv.ua/resources/photos/news/720x574_DIR/202005/1351979_14172436.png'},\r\n    {label: 'aquarius', img: 'https://24tv.ua/resources/photos/news/720x520_DIR/202005/1351979_14172430.png'},\r\n    {label: 'pisces', img: 'https://24tv.ua/resources/photos/news/720x538_DIR/202005/1351979_14172431.png'}\r\n];\r\n\r\n\r\nconst Horoscope = ({zodiac}) => {\r\n    const [hososcopeArr, setHoroscopeArr] = useState(null);\r\n    useEffect(()=>{\r\n        fetch('https://mysterious-garden-57052.herokuapp.com/horoscope/sex')\r\n            .then(res=>res.json())\r\n            .then(res=>{\r\n                setHoroscopeArr(res)\r\n            })\r\n    }, []);\r\n    return hososcopeArr !== null && zodiac !== null ?\r\n        <Placeholder\r\n            stretched\r\n            icon={<img height={100} width={130} src={images.find(item=>item.label === zodiac.name).img}/>}\r\n            header={hososcopeArr.sign_teaser[0].sign_name + \" - \" + hososcopeArr.source}\r\n            action={\r\n                <div style={{display: 'flex'}}>\r\n                    <Button before={<Icon24ShareOutline />} mode={'outline'} stretched style={{marginRight: 8}}>На стену</Button>\r\n                    <Button before={<Icon24StoryOutline />} mode={'outline'} stretched>В историю</Button>\r\n                </div>\r\n            }\r\n        >\r\n            {hososcopeArr.sign_teaser.find(item=>item.sign === zodiac.name).text}\r\n        </Placeholder> :\r\n    null\r\n};\r\n\r\nexport default Horoscope;","import React from 'react';\r\nimport {RichCell, Avatar} from \"@vkontakte/vkui\";\r\n\r\nconst User = ({user, zodiac}) => {\r\n    return user !== null && zodiac !== null ?\r\n        <RichCell\r\n            disabled\r\n            before={<Avatar size={72} src={user.photo_200 || null} />}\r\n            caption={\"Дата рождения - \"+user.bdate}\r\n            bottom={zodiac.title}\r\n        >\r\n            {user.first_name + \" \" + user.last_name}\r\n        </RichCell> : null\r\n};\r\n\r\nexport default User;","import React, {useState, useEffect} from 'react';\r\nimport Horoscope from \"./components/horoscope\";\r\nimport User from \"./components/user\";\r\nimport {Panel, PanelHeader, Placeholder} from \"@vkontakte/vkui\";\r\n\r\nconst Home = ({id, fetchedUser}) => {\r\n    const [zodiac, setZodiac] = useState(null);\r\n    let zodiacArr = [\r\n        [1, '', '', ''],\r\n        [19, 'Козерог (22.12–19.1)', 'Земля', 'Сатурн', 'capricorn'],\r\n        [18, 'Водолей (20.1–18.2)', 'Воздух', 'Сатурн, Уран', 'aquarius'],\r\n        [20, 'Рыбы (19.2–20.3)', 'Вода', 'Юпитер, Нептун', 'pisces'],\r\n        [19, 'Овен (21.3–19.4)', 'Огонь', 'Марс', 'aries'],\r\n        [20, 'Телец (20.4–20.5)', 'Земля', 'Венера', 'taurus'],\r\n        [21, 'Близнецы (21.5–21.6)', 'Воздух', 'Меркурий', 'gemini'],\r\n        [22, 'Рак (22.6–22.7)', 'Вода', 'Луна', 'cancer'],\r\n        [22, 'Лев (23.7–22.8)', 'Огонь', 'Солнце', 'leo'],\r\n        [22, 'Дева (23.8–22.9)', 'Земля', 'Меркурий', 'virgo'],\r\n        [22, 'Весы (23.9–22.10)', 'Воздух', 'Венера', 'libra'],\r\n        [22, 'Скорпион (23.10–22.11)', 'Вода', 'Марс, Плутон', 'scorpio'],\r\n        [21, 'Стрелец (23.11–21.12)', 'Огонь', 'Юпитер', 'sagittarius']\r\n    ];\r\n    useEffect(() => {\r\n        if (fetchedUser !== null) {\r\n            const date = fetchedUser.bdate.split('.')\r\n            let m = date[1];\r\n            let d = date[0];\r\n            if (d<1||d>31) {\r\n                m=0;\r\n                d=0;\r\n            }\r\n            if (m<1||m>12) {\r\n                m=0;\r\n                d=0;\r\n            }\r\n            if (d>zodiacArr[m][0]) m+=1;\r\n            if (m>12) m=1;\r\n            if (zodiacArr[m][1]!=='') {\r\n                setZodiac({title: zodiacArr[m][1]+', '+zodiacArr[m][2]+', '+zodiacArr[m][3], name: zodiacArr[m][4]});\r\n            } else {\r\n                console.log('error')\r\n            }\r\n        }\r\n    }, [fetchedUser]);\r\n    return zodiac !== null ?\r\n        <Panel id={id}>\r\n            <PanelHeader>Гороскопус</PanelHeader>\r\n            <User user={fetchedUser} zodiac={zodiac}/>\r\n            <Horoscope zodiac={zodiac}/>\r\n        </Panel> :\r\n        <Placeholder\r\n            stretched\r\n            header={'Ошибочка вышла'}\r\n        >\r\n            Судя по всему нет данных о дате рождения\r\n        </Placeholder>\r\n\r\n};\r\n\r\nexport default Home;","import React, { useState, useEffect } from 'react';\nimport bridge from \"@vkontakte/vk-bridge\";\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './style.css'\n\nimport Home from './panels/Home';\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(null); //<ScreenSpinner size='large' />\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} />\n\t\t</View>\n\t);\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}